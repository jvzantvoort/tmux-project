package utils

import (
	"testing"
)

/*
func TestEdit(t *testing.T) {
	if testing.Short() {
		t.Skip("Skipping Edit test in short mode")
	}

	// Save original EDITOR
	originalEditor := os.Getenv("EDITOR")
	defer func() {
		if originalEditor != "" {
			os.Setenv("EDITOR", originalEditor)
		} else {
			os.Unsetenv("EDITOR")
		}
	}()

	// Set a dummy editor that just exits
	os.Setenv("EDITOR", "true")

	// Create a temp file to edit
	tempFile := t.TempDir() + "/test.txt"
	if err := os.WriteFile(tempFile, []byte("test"), 0644); err != nil {
		t.Fatalf("Failed to create temp file: %v", err)
	}

	// This should not panic
	defer func() {
		if r := recover(); r != nil {
			t.Errorf("Edit() should not panic: %v", r)
		}
	}()

	Edit(tempFile)
}

func TestEditWithMultipleFiles(t *testing.T) {
	if testing.Short() {
		t.Skip("Skipping Edit test in short mode")
	}

	originalEditor := os.Getenv("EDITOR")
	defer func() {
		if originalEditor != "" {
			os.Setenv("EDITOR", originalEditor)
		} else {
			os.Unsetenv("EDITOR")
		}
	}()

	os.Setenv("EDITOR", "true")

	tempDir := t.TempDir()
	file1 := tempDir + "/file1.txt"
	file2 := tempDir + "/file2.txt"

	os.WriteFile(file1, []byte("test1"), 0644)
	os.WriteFile(file2, []byte("test2"), 0644)

	defer func() {
		if r := recover(); r != nil {
			t.Errorf("Edit() with multiple files should not panic: %v", r)
		}
	}()

	Edit(file1, file2)
}
*/

func TestEditUsesWhich(t *testing.T) {
	// This test verifies that Edit uses Which() to find the editor
	// The actual editor resolution is tested in which_test.go
	t.Log("Edit() uses Which() to resolve editor command")
}

/*
func TestEditWithNonExistentFile(t *testing.T) {
	if testing.Short() {
		t.Skip("Skipping Edit test in short mode")
	}

	originalEditor := os.Getenv("EDITOR")
	defer func() {
		if originalEditor != "" {
			os.Setenv("EDITOR", originalEditor)
		} else {
			os.Unsetenv("EDITOR")
		}
	}()

	os.Setenv("EDITOR", "true")

	// Edit a non-existent file (some editors create it, some don't)
	Edit("/tmp/nonexistent-file-for-testing-12345.txt")
}
*/
